{"ast":null,"code":"import{useContext,useEffect,useState}from\"react\";import{UserContext}from\"./UserContext\";import DOMPurify from'dompurify';import axios from'axios';import mondaySdk from\"monday-sdk-js\";import main3 from\"../images/main3.svg\";import main7 from\"../images/Logo-monday.webp\";import{Navigate}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function MondayCard(){const monday=mondaySdk();const{setUserToken,userToken}=useContext(UserContext);const[redirect,setRedirect]=useState(false);const HandleLogin=()=>{const sanitizedRedirectUrl=DOMPurify.sanitize(\"https://i9j279set4.execute-api.us-east-1.amazonaws.com/prod/auth\");window.location.href=sanitizedRedirectUrl;};useEffect(()=>{const urlParams=new URLSearchParams(window.location.search);const authorizationCode=urlParams.get('code');if(authorizationCode){const sanitizedAuthorizedCode=DOMPurify.sanitize(authorizationCode);axios.get(\"https://i9j279set4.execute-api.us-east-1.amazonaws.com/prod/monday-callback?code=\".concat(sanitizedAuthorizedCode)).then(response=>{const accessToken=response.data.access_token;monday.setToken(accessToken);if(accessToken){setUserToken(accessToken);setRedirect(true);}}).catch(error=>{console.error('Error exchanging code for tokens:',error);});}},[monday]);if(redirect){return/*#__PURE__*/_jsx(Navigate,{to:'/main'});}return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"div\",{className:\"container mx-auto d-grid align-items-center\",style:{height:\" 80vh\"},children:/*#__PURE__*/_jsx(\"div\",{className:\"row justify-content-center align-items-center\",children:/*#__PURE__*/_jsx(\"div\",{class:\"card border-0 shadow\",style:{width:'750px',height:'300px'},children:/*#__PURE__*/_jsxs(\"div\",{class:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{class:\"col-4 col-md-4\",children:/*#__PURE__*/_jsx(\"img\",{src:main3,class:\"img-fluid rounded-start\",alt:\"main3\",style:{height:'300px'}})}),/*#__PURE__*/_jsx(\"div\",{class:\" col-6 col-md-8\",children:/*#__PURE__*/_jsxs(\"div\",{class:\"card-body \",children:[/*#__PURE__*/_jsx(\"img\",{src:main7,alt:\"Logo\",className:\" img-fluid me-2\",style:{height:'100px',width:'350px'}}),/*#__PURE__*/_jsx(\"p\",{class:\"ms-4 text-muted card-text\",children:\"Authorize monday.com to seamlessly sync and visualize your project management for a comprehensive workflow overview.\"}),/*#__PURE__*/_jsx(\"button\",{onClick:HandleLogin,className:\"ms-4 btn btn-primary\",children:\"Authorize\"})]})})]})})})})});}","map":{"version":3,"names":["useContext","useEffect","useState","UserContext","DOMPurify","axios","mondaySdk","main3","main7","Navigate","jsx","_jsx","jsxs","_jsxs","MondayCard","monday","setUserToken","userToken","redirect","setRedirect","HandleLogin","sanitizedRedirectUrl","sanitize","window","location","href","urlParams","URLSearchParams","search","authorizationCode","get","sanitizedAuthorizedCode","concat","then","response","accessToken","data","access_token","setToken","catch","error","console","to","children","className","style","height","class","width","src","alt","onClick"],"sources":["/home/hp/xero/client/src/pages/MondayCard.js"],"sourcesContent":["import {useContext, useEffect, useState} from \"react\";\nimport {UserContext} from \"./UserContext\";\nimport DOMPurify from 'dompurify';\nimport axios from 'axios';\nimport mondaySdk from \"monday-sdk-js\";\nimport main3 from \"../images/main3.svg\";\nimport main7 from \"../images/Logo-monday.webp\";\nimport {Navigate} from \"react-router-dom\";\n\nexport default function MondayCard() {\n\n    const monday = mondaySdk();\n    const {setUserToken,userToken} = useContext(UserContext);\n    const [redirect,setRedirect] = useState(false);\n   \n  \n    const HandleLogin = () => {\n\n        const sanitizedRedirectUrl = DOMPurify.sanitize(\"https://i9j279set4.execute-api.us-east-1.amazonaws.com/prod/auth\");\n        window.location.href = sanitizedRedirectUrl;\n    }\n\n    useEffect(() => {\n        const urlParams = new URLSearchParams(window.location.search);\n        const authorizationCode = urlParams.get('code');\n    \n        if (authorizationCode) {\n          const sanitizedAuthorizedCode = DOMPurify.sanitize(authorizationCode);\n          axios.get(`https://i9j279set4.execute-api.us-east-1.amazonaws.com/prod/monday-callback?code=${sanitizedAuthorizedCode}`)\n            .then((response) => {\n              const accessToken = response.data.access_token;\n           \n              monday.setToken(accessToken);\n    \n              if (accessToken) {\n              \n                setUserToken(accessToken);\n                setRedirect(true);\n              }\n            })\n            .catch((error) => {\n              console.error('Error exchanging code for tokens:', error);\n            });\n        }\n      }, [monday]);\n\n      if (redirect) {\n        return <Navigate to={'/main'} />\n      }\n      \n\n    return (\n        <div>\n         \n            <div className=\"container mx-auto d-grid align-items-center\" style={{ height: \" 80vh\" }}>\n                <div className=\"row justify-content-center align-items-center\">\n                    <div class=\"card border-0 shadow\" style={{ width: '750px', height: '300px' }}>\n                        <div class=\"row\">\n                            <div class=\"col-4 col-md-4\">\n                                <img src={main3} class=\"img-fluid rounded-start\" alt=\"main3\" style={{ height: '300px' }} />\n                            </div>\n                            <div class=\" col-6 col-md-8\">\n                                <div class=\"card-body \">\n                                    <img\n                                        src={main7}\n                                        alt=\"Logo\"\n                                        className=\" img-fluid me-2\"\n                                        style={{ height: '100px', width: '350px' }}\n                                    />\n\n                                    <p class=\"ms-4 text-muted card-text\">Authorize monday.com to seamlessly sync and visualize your project management for a comprehensive workflow overview.</p>\n                                    <button onClick={HandleLogin} className=\"ms-4 btn btn-primary\">\n                                        Authorize\n                                    </button>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n       \n        </div>\n    )\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}